<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Spring application - JPEG image not shown in IE | Tech Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Spring application - JPEG image not shown in IE</h1><a id="logo" href="/.">Tech Blog</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Spring application - JPEG image not shown in IE</h1><div class="post-meta">2020-07-13<span> | </span><span class="category"><a href="/categories/tech-issue/">tech issue</a></span></div><div class="post-content"><p>JPEG image not shown in IE. The responses were arriving with a header that was causing the problem “Unable to decode image”:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X-Content-Type-Options: nosniff</span><br></pre></td></tr></table></figure>

<h2 id="Diagnostics"><a href="#Diagnostics" class="headerlink" title="Diagnostics:"></a>Diagnostics:</h2><p>The header is introduced by Spring Security. Besides this is a security mechanism for Internet Explorer to avoid XSS attacks, the fastest solution to disable this header on response were putting the following line on the application context file of Spring Security, headers section:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;http use-expressions&#x3D;&quot;true&quot; create-session&#x3D;&quot;never&quot; auto-config&#x3D;&quot;true&quot;&gt;</span><br><span class="line">    &lt;headers&gt;</span><br><span class="line">        &lt;!-- this section disable put the header &#39;X-Content-Type-Options&#39; --&gt;</span><br><span class="line">        &lt;content-type-options disabled&#x3D;&quot;true&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;headers&gt;</span><br></pre></td></tr></table></figure>

<p>This problem were only happening on Internet Explorer 11. Not in Chrome or Firefox.</p>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution:"></a>Solution:</h2><p>Add the following setting in Spring Security config file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;security:http auto-config&#x3D;&quot;true&quot; use-expressions&#x3D;&quot;true&quot; authentication-manager-ref&#x3D;&quot;external&quot; pattern&#x3D;&quot;&#x2F;public&#x2F;**&quot; &gt; </span><br><span class="line">  &lt;security:headers&gt;</span><br><span class="line">    &lt;!-- this section disable header &#39;X-Content-Type-Options&#39; --&gt;</span><br><span class="line">    &lt;security:content-type-options disabled&#x3D;&quot;true&quot; &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;security:headers&gt;</span><br></pre></td></tr></table></figure>
<p>For details, chek <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/27934411/images-failing-to-load-in-ie-with-dom-7009-error-unable-to-decode-in-console">this</a></p>
</div><div class="tags"></div><div class="post-nav"><a class="next" href="/2020/06/12/My-first-blog/">Weblogic 12c memory leak of JMS with transaction manager</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/source-storage/">source storage</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tech-issue/">tech issue</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tech-note/">tech note</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/primefaces/" style="font-size: 15px;">primefaces</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/web-config/" style="font-size: 15px;">web config</a> <a href="/tags/jsf/" style="font-size: 15px;">jsf</a> <a href="/tags/weblogic/" style="font-size: 15px;">weblogic</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/07/13/JPEG-image-not-shown-in-IE/">Spring application - JPEG image not shown in IE</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/12/My-first-blog/">Weblogic 12c memory leak of JMS with transaction manager</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/13/SVN-Special-Note-of-Binary-files/">SVN - special note of binary files</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/10/Commandlink-CommandButton-with-ajax-works-only-on-second-click/">Commandlink/CommandButton with ajax works only on second click</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/08/ui-repeat-not-render-string-list-properly/">Facelet repeat tag not render string list properly</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/13/Hibernate-logs-are-not-available-since-v4/">Hibernate logs are not available since v4</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/03/JSF-rerender-elements-by-class-name-via-update-el/">JSF rerender elements by class name via update el</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/02/Prevent-form-resubmitting-while-refreshing-the-page/">Prevent form resubmitting while refreshing the page</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/29/Primefaces-JS-CSS-not-loading/">Primefaces JS/CSS not loading</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/28/redirect-if-javascript-not-support-in-browser/">Redirect if javascript is disabled or not support in browser</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">Tech Blog.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.0"><script type="text/javascript" src="/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>